{"ast":null,"code":"import _defineProperty from\"/Users/jguerreiro/Documents/JorgeDev/SintraWelcomeCentre/sintrawelcomecenntre/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/jguerreiro/Documents/JorgeDev/SintraWelcomeCentre/sintrawelcomecenntre/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/jguerreiro/Documents/JorgeDev/SintraWelcomeCentre/sintrawelcomecenntre/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import emailjs from\"emailjs-com\";import ReactGa from'react-ga';var useForm=function useForm(validate){var _useState=useState({name:\"\",lastName:\"\",email:\"\",textArea:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};var _useState5=useState({isSubmitted:false}),_useState6=_slicedToArray(_useState5,2),isSubmitted=_useState6[0],setSubmitted=_useState6[1];var _useState7=useState({isError:false}),_useState8=_slicedToArray(_useState7,2),isError=_useState8[0],setError=_useState8[1];var handleSubmit=function handleSubmit(event){event.preventDefault();ReactGa.event({category:'Form button',action:'Form button button clicked'});var errors=validate(values);setFormErrors(errors);///only submit if we have no errors\nif(errors&&Object.keys(errors).length===0&&Object.getPrototypeOf(errors)===Object.prototype){var templateParameters={from_name:values.name+\" \"+values.lastName,to_name:\"info@sintrawelcomecentre.com\",message:values.textArea,email:values.email};var name=document.getElementById(\"name\");var lastname=document.getElementById(\"lastname\");var email=document.getElementById(\"email\");var message=document.getElementById(\"message\");emailjs.send(\"default_service\",\"template_1oixrtt\",templateParameters,\"user_nibGXcWm9DhkdSVEaAZHw\").then(function(result){setSubmitted({isSubmitted:true});if(name!==null&&lastname!==null&&email!==null&&message!==null){name.innerText=\"\";lastname.innerText=\"\";email.innerText=\"\";message.innerText=\"\";}},function(error){setError({isError:true});});}};var paragraph='';if(isSubmitted&&paragraph){paragraph='Message has been sent!';}else if(isError&&paragraph){paragraph='There has been an error submitting your message. Please try again';}return{handleChange:handleChange,values:values,handleSubmit:handleSubmit,paragraph:paragraph,formErrors:formErrors};};export default useForm;","map":{"version":3,"names":["useState","emailjs","ReactGa","useForm","validate","_useState","name","lastName","email","textArea","_useState2","_slicedToArray","values","setValues","_useState3","_useState4","formErrors","setFormErrors","handleChange","event","_event$target","target","value","_objectSpread","_defineProperty","_useState5","isSubmitted","_useState6","setSubmitted","_useState7","isError","_useState8","setError","handleSubmit","preventDefault","category","action","errors","Object","keys","length","getPrototypeOf","prototype","templateParameters","from_name","to_name","message","document","getElementById","lastname","send","then","result","innerText","error","paragraph"],"sources":["/Users/jguerreiro/Documents/JorgeDev/SintraWelcomeCentre/sintrawelcomecenntre/client/src/hooks/useForm.ts"],"sourcesContent":["import {useState} from 'react'\nimport emailjs from \"emailjs-com\"\nimport validateFormInfo from './validateForm';\nimport ReactGa from 'react-ga'\n\ntype Submission = {\n    isSubmitted: boolean\n}\n\ntype Error = {\n    isError: boolean\n}\n\nexport type FormValues = {\n    name: string;\n    lastName: string;\n    email: string;\n    textArea: string;\n}\n\nconst useForm = (validate: (values: FormValues) => Record<string, string>) => {\n    const [values, setValues] = useState<FormValues>({\n        name: \"\",\n        lastName: \"\",\n        email:\"\",\n        textArea: \"\"\n    })\n\n    const [formErrors, setFormErrors] = useState<Record<string, string>>({})\n\n    const handleChange = (event: any) => {\n        const {name, value} = event.target\n\n        setValues({\n            ...values,\n            [name]:value\n        })\n    }\n\n    const [isSubmitted, setSubmitted] = useState<Submission>({ isSubmitted:  false })\n    const [isError, setError] = useState<Error>({ isError: false })\n\n    const handleSubmit = (event: any) => {\n        event.preventDefault()\n        ReactGa.event({\n            category:'Form button',\n            action: 'Form button button clicked'\n        })\n        const errors = validate(values)\n        setFormErrors(errors)\n        \n        ///only submit if we have no errors\n        if(errors\n            && Object.keys(errors).length === 0\n            && Object.getPrototypeOf(errors) === Object.prototype) {\n                const templateParameters = {\n                    from_name: values.name + \" \" + values.lastName,\n                    to_name: \"info@sintrawelcomecentre.com\",\n                    message: values.textArea,\n                    email: values.email,\n                }\n                \n                const name = document.getElementById(\"name\")\n                const lastname = document.getElementById(\"lastname\")\n                const email = document.getElementById(\"email\")\n                const message = document.getElementById(\"message\")\n\n            emailjs\n            .send(\"default_service\", \"template_1oixrtt\", templateParameters, \"user_nibGXcWm9DhkdSVEaAZHw\")\n            .then((result) => {\n                setSubmitted({isSubmitted:true})\n                if(name !== null && lastname !== null && email !== null && message !== null) {\n                    name.innerText = \"\"\n                    lastname.innerText = \"\"\n                    email.innerText = \"\"\n                    message.innerText = \"\"\n                }\n            }, (error) => {\n                setError({isError:true})\n            })\n        }\n        \n    }\n\n    let paragraph: string = '';\n\n    if(isSubmitted && paragraph) {\n        paragraph = 'Message has been sent!'\n    } else if (isError && paragraph) {\n        paragraph = 'There has been an error submitting your message. Please try again'\n    }\n    \n    return {handleChange, values, handleSubmit, paragraph, formErrors}\n}\n\nexport default useForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}